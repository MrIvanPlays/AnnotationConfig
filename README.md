![license](https://img.shields.io/github/license/MrIvanPlays/AnnotationConfig.svg?style=for-the-badge)
![issues](https://img.shields.io/github/issues/MrIvanPlays/AnnotationConfig.svg?style=for-the-badge)
![api version](https://img.shields.io/maven-metadata/v?color=%20blue&label=latest%20version&metadataUrl=https%3A%2F%2Frepo.mrivanplays.com%2Frepository%2Fivan%2Fcom%2Fmrivanplays%2Fannotationconfig-core%2Fmaven-metadata.xml&style=for-the-badge)
[![support](https://img.shields.io/discord/493674712334073878.svg?colorB=Blue&logo=discord&label=Support&style=for-the-badge)](https://mrivanplays.com/discord)

# AnnotationConfig

Make configurations with ease

JavaDocs:
- [core](https://mrivanplays.com/javadocs/annotationconfig/core/com/mrivanplays/annotationconfig/core/package-summary.html)
- [toml](https://mrivanplays.com/javadocs/annotationconfig/toml/com/mrivanplays/annotationconfig/toml/package-summary.html)
- [yaml](https://mrivanplays.com/javadocs/annotationconfig/yaml/com/mrivanplays/annotationconfig/yaml/package-summary.html)

# Usage example
<details><summary>Code Example</summary>
<p>

```java
import com.mrivanplays.annotationconfig.core.annotations.ConfigObject;
import com.mrivanplays.annotationconfig.core.annotations.Ignore;
import com.mrivanplays.annotationconfig.core.annotations.Key;
import com.mrivanplays.annotationconfig.core.annotations.Max;
import com.mrivanplays.annotationconfig.core.annotations.Min;
import com.mrivanplays.annotationconfig.core.annotations.comment.Comment;
import com.mrivanplays.annotationconfig.core.serialization.ConfigDataObject;
import com.mrivanplays.annotationconfig.core.serialization.FieldTypeSerializer;
import com.mrivanplays.annotationconfig.core.serialization.SerializedObject;
import java.lang.reflect.Field;
import java.util.HashMap;
import java.util.Map;

@Comment("Generated by AnnotatedConfig v2.0.0")
@Comment("This is a config example for developers.")
public class ExampleAnnotatedConfig {

  @Comment("This value can only be between 1 and 3 ( 1 and 3 included )")
  @Min(minInt = 1)
  @Max(maxInt = 3)
  private int foo = 2;

  @Comment("This string cannot be longer than 20 characters ( spaces are included )")
  @Max(maxInt = 20)
  private String bar = "This is some string";

  @ConfigObject private MessagesSection messages = new MessagesSection();

  @Comment("All configurable messages")
  public static final class MessagesSection {

    @Key("no-permission")
    private String noPermission = "You don't have permission to perform this command";

    @Key("no-spamming")
    private String noSpamming = "You can't spam this";

    public String getNoPermission() {
      return noPermission;
    }

    public String getNoSpamming() {
      return noSpamming;
    }
  }

  @Ignore private String importantClass = "com.mrivanplays.something.Important"; // this is ignored

  @Comment("This is also going to be serialized as a config object,")
  @Comment("but it is much more controllable rather than @ConfigObject")
  private SomethingToSerialize serialize = new SomethingToSerialize("foo", 1, (byte) 0x2);

  public static final class SomethingToSerialize {

    private final String foo;
    private final int bar;
    private final byte baz;

    public SomethingToSerialize(String foo, int bar, byte baz) {
      this.foo = foo;
      this.bar = bar;
      this.baz = baz;
    }

    public String getFoo() {
      return foo;
    }

    public int getBar() {
      return bar;
    }

    public byte getBaz() {
      return baz;
    }
  }

  /**
   * This should be registered before calling the dump method for this annotated config using the
   * SerializerRegistry
   */
  public static final class SomethingToSerializeSerializer
      implements FieldTypeSerializer<SomethingToSerialize> {

    @Override
    public SomethingToSerialize deserialize(ConfigDataObject data, Field field) {
      Map<String, Object> dataMap = (Map<String, Object>) data.getRawData();
      return new SomethingToSerialize(
          String.valueOf(dataMap.get("foo")),
          Integer.parseInt(String.valueOf(dataMap.get("bar"))),
          Byte.parseByte(String.valueOf(dataMap.get("baz"))));
    }

    @Override
    public SerializedObject serialize(SomethingToSerialize value, Field field) {
      Map<String, Object> ret = new HashMap<>();
      ret.put("foo", value.getFoo());
      ret.put("bar", value.getBar());
      ret.put("baz", value.getBaz());
      return SerializedObject.map(ret);
    }
  }

  @Comment("This cannot have a negative value")
  @Min(minDouble = 0)
  @Key("barxtwo") // you can also apply @Key to regular fields, not just in config objects
  private double baz = 0.2;

  public int getFoo() {
    return foo;
  }

  public String getBar() {
    return bar;
  }

  public MessagesSection getMessages() {
    return messages;
  }

  public String getImportantClass() {
    return importantClass;
  }

  public SomethingToSerialize getSerialize() {
    return serialize;
  }

  public double getBaz() {
    return baz;
  }
}

```
</p>
</details>
<details><summary>Code Example dump output (YAML)</summary>
<p>
Keep in mind in order to show you all of the features of AnnotatedConfig, everything has been stuffed in 1 class. Don't forget that in Java you can do multiple classes ;) . Line count doesn't matter.

```yaml
# Generated by AnnotatedConfig v2.0.0
# This is a config example for developers.

# This value can only be between 1 and 3 ( 1 and 3 included )
foo: 2

# This string cannot be longer than 20 characters ( spaces are included )
bar: "This is some string"

# All configurable messages
messages:
  no-spamming: "You can't spam this"
  no-permission: "You don't have permission to perform this command"

# This is also going to be serialized as a config object,
# but it is much more controllable rather than @ConfigObject
serialize:
  bar: 1
  foo: "foo"
  baz: 2

# This cannot have a negative value
barxtwo: 0.2


```

</p>
</details>

# Installation

Maven:
```xml

    <build>
        <plugins>
            <plugin>
                <version>3.7.0</version>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <configuration>
                    <source>1.8</source>
                    <target>1.8</target>
                    <compilerArgs>
                        <arg>-parameters</arg>
                    </compilerArgs>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-shade-plugin</artifactId>
                <version>3.1.1</version>
                <configuration>
                    <relocations>
                        <!-- Relocating is only necessary if you're shading for other library addition -->
                        <relocation>
                            <pattern>com.mrivanplays.annotationconfig</pattern>
                            <shadedPattern>[YOUR PLUGIN PACKAGE].annotationconfig</shadedPattern> <!-- Replace this -->
                        </relocation>
                    </relocations>
                </configuration>
                <executions>
                    <execution>
                        <phase>package</phase>
                        <goals>
                            <goal>shade</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>

    <repositories>
        <repository>
            <id>ivan</id>
            <url>https://repo.mrivanplays.com/repository/ivan/</url>
        </repository>
    </repositories>

    <dependency>
        <groupId>com.mrivanplays</groupId>
        <!-- Types: toml, yaml -->
        <!-- If you want .conf/.properties configuration, you can set the type to core -->
        <artifactId>annotationconfig-(type)</artifactId> <!-- Replace type -->
        <version>VERSION</version> <!-- Replace with latest version -->
        <scope>compile</scope>
    </dependency>
```